# Surge Documentation - Full Corpus

Flattened export of all documentation pages for AI ingestion.
Each section includes a source route.

## Surge | Introduction
Source: /

# ğŸ‘‹ Introducing Surge

## Why canâ€™t Bitcoin-backed lending reflect Bitcoinâ€™s values? 
Bitcoin is trustless by design: transparent, decentralized, and self-sovereign. 
Yet the lending platforms that serve it are anything but. Custodial, opaque, and centralized, they rely on â€œtrust-me" systems where users surrender their keys, visibility, and control. 
The result? A broken market where the most principled Bitcoiners, those who care about custody, verification, and openness are forced to compromise everything Bitcoin stands for just to access liquidity.

## Surge: A Bitcoin-native Credit Market
Surge offers Bitcoiners something different: a Bitcoin-native Credit Market that is transparent, decentralized, and trust-minimized. 
Built from the ground up for self-custody and programmable control, Surge enables Bitcoiners to borrow stablecoins without giving up ownership or compromising on the values that brought them to Bitcoin in the first place.

Itâ€™s not just about accessing liquidity, itâ€™s about doing so without selling your Bitcoin, without intermediaries, and without hidden risk. 

With Surge, you:
- Borrow against your Bitcoin directly on-chain
- Control a programmable dVault verified by Taproot + threshold signatures
- Interact with an open credit market powered by LPs, not black-box institutions

Surge is not a rebrand of legacy lending. Itâ€™s a reimagination â€” a credit market for the real Bitcoiners of today.

## What Comes Next

These technical docs walk through how Surge works - step by step. From how Bitcoin stays under non-custodial control, to how market-driven liquidity pools (including variable and fixed-rate markets) enable competitive borrowing terms, to how the system remains open, verifiable, and rehypothecation-free.

Surge is not just infrastructure. Itâ€™s a promise:

>**Never compromise your Bitcoin, ever.**

Explore the documentation and see how Surge is building the next generation of Bitcoin-native finance.

## Market Landscape
Source: /overview/bitcoin-lending-landscape

# ğŸ—ºï¸ Market Landscape
## Market Context

Itâ€™s difficult to estimate the true size of the Bitcoin-backed lending market. Most platforms offer no public proof-of-reserves or on-chain visibility, making analysis challenging. Still, this market is substantial, with products dating back to 2014.

We analyzed over 20 players and identified key patterns. The summary below outlines those findings. Youâ€™ll find the full dataset in the resources section.

## Market Categorization 
Based on Custody Model ğŸ‘‡
bi
### CeFi Platforms
These platforms take full custody of your Bitcoin either directly or via a group of trusted institutions using multi-institution custody (MIC) models. 
This category dominates the market and includes regulated entities. However, most of these platforms are still black boxes, offering little or no transparency. 

### Bitcoin DeFi Models (Multisig, P2P, DLCs)
Emerging platforms in this space leverage Bitcoin-native scripting: multisigs, Discreet Log Contracts (DLCs), and now Tapscript. These models appeal to Bitcoiners with smaller holdings (often below ten BTC). 
While adoption is growing, their programmability and UX are still limited compared to EVM-based ecosystems.

### Wrapped BTC on other chains
This market is sizable, with WBTC being the dominant wrapped asset, followed by cbBTC, BTCb, tBTC, and others. These models use custodians like BitGo to lock BTC and mint wrapped versions for use in ecosystems like Ethereum or Base. 
While the smart contracts live on these chains, the BTC itself is held by third parties, making it difficult to classify as true DeFi from a Bitcoin perspective.

## Key Insights from the Market Analysis

- **Lending product emergence follows market cycles:** New players and usage spikes occur every bull market, signaling genuine demand.
- **CeFi still dominates:** With unclear regulation, custodians like BitGo and Anchorage have become infrastructure backbones, contributing to CeFiâ€™s continued hold.
- **Transparency remains lacking:** While a few platforms have started offering proof-of-reserve reports, most shy away from disclosing custody details - despite managing digital, on-chain assets.
- **Borrowing costs are high:** CeFi-led models come with higher rates, predatory liquidations, and opaque loan terms
- **Access is limited:** Many platforms cater to HNWIs or institutions, sidelining everyday Bitcoiners (less than ten BTC) who face higher borrowing costs and fewer options.
- **Decentralized platforms are gaining ground:** A wave of new entrants is adopting trust-minimized infrastructure and on-chain verification. While still early, this category is poised to disrupt the current centralized players.

## Whatâ€™s Missing in Bitcoin Lending?
Weâ€™ve created a new visual map that charts Bitcoin-backed lending platforms across two axes:
- X-Axis: Market Focus from HNWIs to Grassroots Bitcoiners
- Y-Axis: Custody Model from Full Custody to Self-Custody

## We also introduce a new category
Surge doesnâ€™t just fit into the existing categories - it reimagines the model entirely:

- Non-custodied BTC in verifiable, non-rehypothecated dVaults
- Open lending markets for rate discovery and fair access
- Programmable loan terms enforced on-chain

Itâ€™s not a CeFi platform. Itâ€™s not DeFi built elsewhere. Itâ€™s a **Bitcoin-native Credit Market**, a fundamentally new design

## Resources
- [Bitcoin Lending Platforms Comparison Table](https://surgehq.notion.site/263232deac9080e3a6a3f9f040047105?v=263232deac90803bbf49000c80e4431b)  
- [In-depth Breakdown: Bitcoin-backed Lending Market](https://onchainbitcoin.substack.com/p/bitcoin-lending-landscape)

## Stablecoin Adoption
Source: /overview/stablecoins

# ğŸ’µ Stablecoin Adoption

Bitcoin was born as peer-to-peer digital cash but over time, it has evolved into something far more powerful:
A base-layer currency, a hedge against inflation, digital gold, and the cornerstone of a future monetary standard.
We all want hyperbitcoinization, but it wonâ€™t happen overnight.

Until then, stablecoins are doing the heavy lifting.

Theyâ€™re onboarding millions, replacing legacy rails, and acting as a bridge between fiat and crypto, between the world we live in, and the world Bitcoin is building.

## The Growth is Real
The stablecoin market has reached $288 billion today, and is projected to hit $2 trillion by 2028, according to the U.S. Treasury.
This isnâ€™t just growth, itâ€™s a macro transformation.

## What Stablecoins enable
- **Low-cost global payments:** They shrink the gap between transaction and settlement.
- **Instant finality:** Real-time, on-chain settlement without legacy delays.
- **Programmable finance:** Logic, automation, and smart contracts, finance meets software.

## Adoption Catalysts
Stablecoin momentum is only accelerating, thanks to two big tailwinds:
- GENIUS Act (2025): A landmark U.S. regulatory framework. While it introduces some centralization, it unlocks massive new markets and prevents collapses like Terra Luna.
- Institutional on-chain entry:
	- Arc Network by Circle
	- Tempo by Stripe
	- Plasma by Tether
	- USAT (U.S. Asset Token)

These are not just product launches. They are infrastructure shifts, bringing real users on-chain, beyond cryptoâ€™s degen sandbox.

## What this means for Bitcoin
Stablecoins donâ€™t compete with Bitcoin, **they complement it.**
- They bring utility to payments, remittances, and financial access.
- They fuel demand for decentralized credit rails.
- They accelerate the need for Bitcoin-native alternatives to custodial lending.

As stablecoin adoption grows, so does the urgency for:
- Fewer intermediaries
- More on-chain visibility
- Lower costs
- Access for everyday Bitcoiners

This is the moment for a new category in Bitcoin lending: a transparent, programmable, Bitcoin-native credit market.
Thatâ€™s what Surge is here to build.

## Resources
[Stablecoin adoption stats](https://stablecoins.asxn.xyz/)

## For Bitcoiners
Source: /product/for-bitcoiners

# âœŠ For Bitcoiners

## Your Bitcoin, Your Terms.
Access a Bitcoin-native Credit Market, without giving up full-custody. Itâ€™s built for everyday Bitcoiners who value sovereignty, transparency, and verifiable custody, not centralized black boxes.

Your BTC stays in a unique, programmable Taproot vault, secured by a Decentralized Custody Network using threshold Schnorr signatures. 
Itâ€™s on-chain, auditable, and non-custodial, always.

## ğŸš€ How It Works
### 1. Sign Up Securely
Get started via mobile app on Android or iOS. Sign up with just an email + OTP. We create a secure, self-custodial wallet with built-in backup and 2FA for enhanced protection.

### 2. Request a Credit Line
Specify your initial credit line amount with
- Fixed interest rates (8â€“11% annually)
- Variable interest rates coming soon (6.9% target)
- A 12-month term with flexible repayment

You choose which market (variable or fixed) to borrow from; liquidity is drawn from the market accordingly.
- No need to draw full amount upfront, you control usage

### 3. Send Bitcoin
- A unique Taproot address is generated per credit line
- You deposit BTC at 50% LTV (e.g., send 0.1 BTC for $3K USDC credit)
- After 3 confirmations, your credit line becomes active

### 4. Draw & Repay Flexibly
- Withdraw stablecoins (USDC, USDT) to any address
- Spend, send, or off-ramp to a bank account
- Repay any time to reclaim your BTC
- Add more BTC to reduce LTV or unlock more credit

### 5. Stay Verifiably in Control
Your BTC is never moved without:
- Your signature, and
- the Distributed Custody Network signiture based on programmable vault logic

If the system fails or goes offline, your vault includes a time-locked refund pathâ€”returning your BTC to your wallet after term expiration.

### 6. Liquidation, but Fair
Liquidation with a rules-based process that only liquidates in extreme cases when BTC collateral health declines past 90%.
- Triggered only when on-chain oracles (like BTC/USD price) report sustained volatility
- Price feeds are transparent and openâ€”you can verify exactly what data is being used
- Price feeds are double checked by DCN before liquidation begins

This means no surprise wipeouts, no discretionary callsâ€”just fair, on-chain enforcement with double checks.

## ğŸ” Built for Transparency

- **Taproot Vaults (dVaults):** Powered by threshold Schnorr signatures, enabling shared control and programmable enforcement.
- **Verifiable Collab-Custody:** You can inspect your vault and verify BTC remains unrehypothecated and on-chain.
- **Open System:** All terms, credit logic, and signer network info are transparent at [surge.build](https://surge.build)
- **Transparent Oracles:** Anyone can view the price feeds that govern loan health and liquidation triggers.

## ğŸ’¡ Why the credit market
Unlike traditional loans, Surgeâ€™s credit market offers flexible credit:
- Borrow only what you need, when you need it
- Repay and reuse, no need to reapply
- Maintain control over your BTC with on-chain proof at every step

Surge is for Bitcoiners who believe in holding their keys and want access to liquidity without selling their future.

## Distribution Partners
Source: /product/for-distribution-partners

# ğŸ¤ For Distribution Partners

Surgeâ€™s credit market is **permissionless**: any distribution partner can integrate and offer borrow or earn products under their own brand. You get the same on-chain infrastructureâ€”dVaults, the Decentralised Custody Network (DCN), and the liquidity layerâ€”without building custody or lending from scratch.

## ğŸ”Œ Permissionless by design

- **No gatekeeping** - Integrate via public APIs and on-chain flows. No exclusive partnerships or approval gates required.
- **Same rails as Surge** - Your users tap the same Bitcoin-native credit market: programmable dVaults, oracle-driven liquidation, and multi-market liquidity (variable and fixed).
- **You own the experience** - Brand the UI, custody UX, and product packaging. Surge provides the settlement and risk infrastructure.

That makes it possible to **white-label** both borrowing (for your users who hold BTC) and earning (for your users who want to supply stablecoins) without operating custody or a lending book yourself.

## ğŸ“¦ White-label borrow products

Offer BTC-backed credit under your brand:

- **Your app, Surgeâ€™s execution** - Integrate your wallet, lock BTC in a dVault, and draw stablecoins. You control onboarding, UX, and support; Surge and the DCN handle collateral verification, disbursement, and repayments.
- **Fixed or variable rate** - Plug into the variable pool or fixed-rate markets so you can offer the terms that fit your users (e.g. fixed 6% or floating).
- **Transparent and verifiable** - Each credit line is a Taproot UTXO; you can surface proof of non-custodial, unrehypothecated collateral to users and regulators.

Use cases: neobanks, wallets, exchanges, or any platform that wants to offer â€œborrow against your Bitcoinâ€ without running the underlying credit and custody stack.

## ğŸ’° White-label earn products

Offer yield on stablecoins under your brand:

- **Your brand, Surgeâ€™s liquidity layer** - Users supply USDC/USDT into the same pools that back the credit market. You design the product (e.g. â€œSavingsâ€ or â€œEarnâ€), Surge and the DCN handle pool accounting, rate setting, and liquidations.
- **Variable and fixed tranches** - You can offer floating yield from the variable pool or fixed-rate earn from fixed-rate markets, depending on what your users want.
- **Real yield from real credit** - Yield comes from borrower interest and (where applicable) liquidation economics, not token incentives or opaque leverage.

Use cases: savings apps, treasury products, or any distributor that wants â€œearn on stablecoinsâ€ backed by Bitcoin-collateralized credit, without operating the lending or custody infrastructure.

## ğŸ”— How to plug in

- **Technical integration** - Connect to Surgeâ€™s execution and liquidity layer via the public interfaces and APIs that power the credit market. Technical Documentation and integration patterns coming soon!
- **Compliance and UX** - You remain responsible for your jurisdictionâ€™s rules, KYC/AML if applicable, and user communication. Surge provides verifiable on-chain data (collateral, rates, pool state) to support transparency and reporting.
- **Support and positioning** - You handle user support and positioning (e.g. â€œPowered by Surgeâ€ or fully white-labeled). Surge focuses on infrastructure and protocol integrity.

If youâ€™re building a borrow or earn product and want to use Surgeâ€™s permissionless credit market under your own brand, reach out via [surge.build](https://surge.build) or the links in [Resources](/resources/quick-links).

## Everyone
Source: /product/for-everyone

# âœŠ For Everyone  

Surge isnâ€™t just for Bitcoiners and LPs. Itâ€™s for everyone who cares about building open, verifiable, and trust-minimized systems on Bitcoin.

We believe critical financial infrastructure must be transparent by default. Thatâ€™s why weâ€™re committed to making the following available for public review:

## ğŸ§¾ Distributed Custody Network Transparency
- Live list of active signer nodes
- Entity-level disclosure (who they are, why theyâ€™re trusted)
- Slashing history and performance metrics

## ğŸ“ˆ Oracle Feed Integrity
- Real-time oracle inputs powering LTV and liquidation
- Historical data and update cadence
- Circuit-breaker logic for edge cases

## ğŸ” Verifiable Custody
- Every Bitcoinerâ€™s credit line is backed by a unique Taproot address
- Anyone can verify that BTC is unrehypothecated and non-custodial

## ğŸ“‘ Audits & Reports
- Ongoing third-party security audits
- Internal monitoring metrics
- Protocol health reports and governance insights

All of this will be published at [surge.build](https://surge.build): your window into how Surge operates under the hood.

>Because if itâ€™s not verifiable, itâ€™s not Bitcoin.

## Liquidity Providers
Source: /product/for-liquidity-providers

# ğŸ’° For Liquidity Providers

Surge introduces a novel multi-market architecture, managed by a Decentralised Custody Network (DCN). 
These markets act as the liquidity layer between BTC and stablecoin capital, enabling Bitcoiners to access different credit markets with different terms while LPs earn risk based yield from actual credit usage.

Unlike traditional DeFi platforms that rely on speculative trading activity, Surge enables LPs to earn predictable, usage-driven yield, with added incentives for participating in network operations like liquidations.

## ğŸ§© The Architecture: LP markets + DCN

At the heart of Surgeâ€™s lending mechanism is a multi-chain, DCN-coordinated communication layer:
- Markets exist natively in stablecoins (USDC, USDT) on Ethereum (Base).
- When a Bitcoiner requests credit, the DCN verifies BTC collateral on-chain, signs a Bitcoin transaction, and authorizes the stablecoin disbursement.
- The DCN jointly maintain custody policies, validate credit conditions, and enforce programmatic rules for repayment, liquidation, and timelocks.

The DCN effectively bridges Bitcoin and Ethereum/Base trust-minimized, with no wrapping or custodial middlemen.

## ğŸ“ˆ Variable vs Fixed Supply

Surgeâ€™s multi-market layer can offer both **variable** (floating) and **fixed-rate** markets. As an LP you can choose how much of your supply earns variable rate vs a fixed rate.

- **Variable market** â€” You supply to the market and earn a utilization-driven floating rate. You can withdraw whenever you want.
- **Fixed-rate markets** â€” You **opt in** to specific fixed-rate markets (e.g. 6%, 8%) and set **allocation limits** (e.g. max 50% of your deposit in â€œFixed 6%â€). When borrowers take fixed-rate loans, your funds may be moved from the variable pool into that fixed market; you earn the fixed supply rate on that portion. Your **effective APY** is the weighted average of rates across your variable and fixed positions.
- **Withdrawing from fixed** â€” To â€œwithdrawâ€ from a fixed market you swap your position with another lender that wants exposure to that fixed market. If no lenders are available to swap, you can enter a queue, offer to swap your position at a discount, or wait for a borrower from that market to repay.

## ğŸ“Š LP Dashboard & DCN Participation

LPs interact through an intuitive web interface to:
- Deposit supported stablecoins into active liquidity pools
- Monitor pool health, active credit lines, interest accrued, and risk metrics
- Configure preferences like pool size, chain, stablecoin, and duration
- Join the queue to run a Distributed Custody node

Running a Distributed Custody node is optional, but highly encouraged for active LPs. It enables:
- Priority yield opportunities and liquidation incentives
- Visibility into on-chain conditions and vault-level transparency

## ğŸ’° Why LPs Choose Surge
- Untapped Bitcoin-native demand - Yield from BTC-backed credit lines in a transparent market, previously gated behind CeFi platforms
- Competitive, real yield - Interest paid by Bitcoiners drawing credit, not speculative APYs
- Liquidation bonuses - 5% liquidation premium on undercollateralized positions goes to pools
- Compliant-ready design - Surfaces under the GENIUS Act framework for stablecoin operations
- Build your Bitcoin treasury - Grow BTC position by providing fiat liquidity
- Grow your Bitcoin treasury - 5% liquidation premium on purchasing undercollateralized positions

Unlike ETH-centric DeFi or risky alt-L2 plays, Surge offers Bitcoin-first, credit-driven utility that compounds over time.

Surge brings yield back to the fundamentals: real users, real assets, and verifiable on-chain logic, not token games or circular lending.

## Our Thesis
Source: /product/our-thesis

# ğŸ”­  Our Thesis

## What
Bitcoin-backed lending today is still stuck in the past. Platforms are built around custodians, hidden rehypothecation, off-chain agreements, and predatory liquidations. 
They were designed for institutions and early whales, not for everyday Bitcoiners who hold their keys, believe in transparency, and need reliable access to liquidity.

## So What
That means millions of Bitcoiners, especially those holding under 10 BTC are left out. Theyâ€™re forced to trust black-box lenders, pay excessive fees, or sell their BTC in emergencies. 
Worse, the core values of Bitcoin self-custody, openness, and verifiability are lost in the very systems meant to support it.

## Now What
Surge is building something fundamentally different: a Bitcoin-native credit market that puts users in control. 
With dVaults (programmable Bitcoin vaults), market-driven terms, and a decentralized signer network, Bitcoiners can borrow stablecoins without giving up custody, trust, or transparency. 
Itâ€™s a credit system designed for Bitcoiners, not institutions. Built on-chain. Aligned with the ethos.

## Product Overview
Source: /product/overview

# ğŸ–¼ï¸ Product Overview
Surge is a Bitcoin-native credit market powered by taproot-based UTXOs, where every credit line is a dedicated UTXO with two signers: the Bitcoiner and a Decentralised Custody Network (DCN).

## How it Works
Today, each Bitcoiner uses the Surge mobile app to access the Surge Credit Markets. In the app they send BTC to a unique dVault, a Taproot-based, programmable vault. 
This vault enforces three deterministic spending paths:

1. **Voluntary Repayment:** If no credit is drawn, or once the borrower repays, they can withdraw BTC directly, without signer network intervention. 
2. **Liquidation:** If the credit lineâ€™s health drops below a predefined threshold, the DCN will sign a liquidation transaction, only when validated by multiple external oracle attestations.
3. **Delinquent:** If the credit line is not paid off or rolled over at the end of term, the DCN can sign a liquidation transaction. BTC will be sold to cover debt + interest and the remainder returned.
4. **Transfer:** Bitcoiners may transfer loans to and from Surge's credit market. This requires signitures from the Bitcoiner, DCN, and a third party credit provider.
5. **Time-Locked Recovery:** If the system becomes unresponsive or the DCN go offline, the BTC becomes spendable by the borrower after a pre-set time lock.

This ensures that funds are always:
- Non-custodial â€“ borrower shares control with the DCN 
- Verifiably on-chain â€“ visible and auditable at all times
- Decentralized â€“ DCN is distributed with multiple parties and economically aligned

Once the BTC is locked, stablecoin liquidity is released from the Ethereum-based smart contract (USDC supported, USDT coming soon), sent directly to the borrower's self custodied wallet. 
The smart contracts implement multiple markets where Bitcoiners can tap liquidity, and LPs earn yield, with infrastructure ensuring safety and execution. The different markets can offer both **variable** (floating) and **fixed-rate** markets.

## Interface Suite

Surge has three core interfaces, each designed for a key participant:
- **Bitcoiners:** Access the credit market via Surgeâ€™s mobile app (iOS, Android; PWA coming soon) or via distribution partners who white label Surge's permissionless Credit Market. No paperwork, just verifiable BTC and stablecoin access in less than 30 minutes.
- **Liquidity Providers:** Contribute stablecoins into markets, earn yield from variable and/or fixed-rate markets, and optionally run signer nodes in our DCN to protect the rules based system.
- **Distributed Custody Network Members:** Access technical data, audit trails, oracle feeds, system status, and open-source repos via surge.build, our transparency hub.

Surge is built ground-up for trust-minimized credit and no one can touch their Bitcoin without following predefined, public rules.

## /resources/community-guidelines
Source: /resources/community-guidelines

# <h1>ğŸš¨ COMMUNITY GUIDELINES ğŸš¨ </h1> <br />

Becoming a true SurgantÂ ğŸœÂ involves creating a respectful and energized atmosphere together with the team. Here are the ground rules:âš¡Â Kindness and RespectÂ âš¡

Treat everyone with respect and kindness. Absolutely no harassment, witch hunting, sexism, racism, or hate speech will be tolerated.

ğŸ”ŒÂ **No Advertising or Spam**Â ğŸ”Œ <br/>
No spam or self-promotion (server invites, advertisements, etc.) without permission from a staff member. This includes DMing fellow members.

ğŸš«Â **No Offensive Content**Â ğŸš« <br/>
No age-restricted, obscene, or offensive content. This includes text, images, or links featuring nudity, sex, hard violence, or other graphically disturbing content.

ğŸ’¡Â **No Requests for Money or Tokens**Â ğŸ’¡ <br/>
No member of the team will ask for money or offer tokens for sale. If you receive any such messages, report them to the Surge admins or team members for appropriate action.

ğŸŒÂ **No Speculations**Â ğŸŒ <br/>
Discussion or speculation regarding airdrops, ICO/IEO, or trading is not allowed and will be deleted.

ğŸ”‹Â **No Impersonation and Logo Usage**Â ğŸ”‹ <br/>
Do not use the name "Surge" or the name of any other third-party platform in a username that may impersonate a team member. Do not use the Surge logo as your avatar.

ğŸ“„Â **Partnerships with Surge**Â ğŸ“„ <br/>
Interested in partnering with Surge? Please fill out our partnership form for review and approval. DMing team members regarding partnerships without prior submission will be considered spam.

ğŸ”’Â **Security Consciousness**Â ğŸ”’ <br/>
Be security conscious, Surgants! All your possible answers are in the docs.

- No member of the TEAM will DM you first.
- All TEAM admins have a verified Surge badge.
- Avoid any links that pose as SUPPORT or TICKETS.
- Do not reply to any DMs claiming to be support or offer help.
- Turn off message requests in settings to stop scammers from sending you a DM.

## Surge | Branding and Logos
Source: /resources/media-kit

# Branding and Logos [Bitcoin-native Credit Market]

## Specification

- **Theme Color**
  - HEX: <span style={{ display: 'inline-flex', alignItems: 'center', gap: '8px' }}><span style={{ display: 'inline-block', width: '16px', height: '16px', backgroundColor: '#FE7B17', borderRadius: '3px', verticalAlign: 'middle' }}></span>#FE7B17</span>
  - RGB: 254, 123, 23
  - HSB: 26, 91, 100

## Download Brand Pack (including SVGs)

- [Surge Branding Logos.zip](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos.zip)

## Regular Logos

surge-full-primary-light:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-full-primary-light.png)

surge-full-primary-darkï¼š

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-full-primary-dark.png)

surge-full-monogram-light:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-full-monogram-light.png)

surge-full-monogram-dark:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-full-monogram-dark.png)

surge-icon-light:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-icon-light.png)

surge-icon-dark:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-icon-dark.png)

surge-icon-mono-light:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-icon-mono-light.png)

surge-icon-mono-dark:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-icon-mono-dark.png)

{/* surge-superstack-full-light:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-superstack-full-light.png)

surge-superstack-full-dark:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-superstack-full-dark.png)

surge-superstack-mono-full-light:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-superstack-mono-full-light.png)

surge-superstack-mono-full-dark:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/surge-superstack-mono-full-dark.png)

clearspace-surge-superstack-full-primary:

![surge-full-primary-black.png](https://surge.sfo3.cdn.digitaloceanspaces.com/assets/Surge%20Branding%20Logos/docs-only/clearspace-surge-superstack-full-primary.png)

surge-superstack-do-not-misuse: */}

## Colours

## /resources/quick-links
Source: /resources/quick-links

# Quick Links

Website: [https://surge.build](https://surge.build)

Twitter: [https://x.com/surge_credit](https://x.com/surge_credit)

LinkedIn:  [https://linkedin.com/company/surgebuild](https://www.linkedin.com/company/surgecredit)

Blog: [https://surge.build/blog](https://surge.build/blog)

## Credit Markets
Source: /tech/credit-markets

# ğŸ“Š Credit Markets

Surge's credit markets let borrowers and lenders meet on transparent, programmable terms. Instead of a single opaque pool or a custodial black box, Surge offers **variable** and **fixed-rate** markets where liquidity is shared, moved on demand, and always auditable.

## How It Works

### Variable and fixed markets

- **Variable market** - The primary market. Borrowers pay a utilization-driven floating rate; lenders earn yield that moves with demand. All deposits land here first.
- **Fixed-rate markets** - Optional tranches (e.g. 6%, 8%) where borrowers lock in a rate and lenders earn a fixed supply rate. Liquidity is **moved** from the variable pool when borrowers take fixed-rate loans and **moved back** on repay. There is no duplication or rehypothecation.

Borrowers choose which market fits their needs. Lenders can opt in to fixed markets and control how much of their capital is exposed to each. One liquidity base, multiple rate options, and clear rules for how funds flow.

### Cross-chain liquidity

Stablecoins are deposited on any CCTPv2 supported network and routed to a unified marketplace. This creates a single, deep pool of liquidity instead of fragmented, thin markets across chains. Supply stays canonical and verifiable.

## Why This Design

### vs. Single-pool protocols

Many lending protocols offer only one rate (either variable or fixed). Surge's multi-market design gives both: borrowers who want predictability can lock in a fixed rate; those who prefer flexibility use the variable market. Lenders earn from both, with explicit control over exposure.

### vs. CeFi lending

Traditional Bitcoin - backed lending is custodial and opaque. Users give up keys, visibility, and control. Surge's credit markets are non - custodial and on-chain: collateral stays in programmable dVaults, rates and utilization are verifiable, and no single party can move funds without the rules being satisfied.

### vs. Speculative DeFi

Yield in many DeFi protocols comes from token incentives, leveraged farming, or circular lendingâ€”not from real credit usage. Surge's credit markets are backed by actual Bitcoin-collateralized borrowing. LPs earn from interest paid by borrowers and (where applicable) from liquidation economics. Real assets, real demand, real yield.

### vs. Fragmented liquidity

Splitting liquidity across many isolated pools or chains reduces depth and increases slippage. Surge aggregates liquidity into a central credit market, with routing that keeps supply canonical and settlement deterministic. Deeper markets, better execution, and transparent accounting.

---

Surge's credit markets are built for Bitcoin-native finance: transparent, programmable, and aligned with real credit demand rather than speculation or custodial intermediation.

### Cross-links

- [For Liquidity Providers](/product/for-liquidity-providers) â€” LP perspective on variable vs fixed  
- [Repayment](/tech/payment) â€” Normal closure path  
- [Liquidation](/tech/dvaults-liquidation) â€” dVault liquidation path

## Delinquency
Source: /tech/delinquency

# ğŸ¯ Deterministic Liquidation for Locked Bitcoin

*dVaults* are Taproot-based Bitcoin vaults that enforce deterministic liquidation and non-custodial collateral management. Each vault encodes three spend paths:
1. **Repay** - borrower + DCN authorization.  
2. **Liquidate** - DCN-only authorization when collateral falls below the minimum ratio.  
3. **Delinquency** - DCN-only authorization when credit line is not paid off or extended at end of term.  
4. **Transfer** - borrower + DCN + third party authorization when borrower requests loan transfer out of Surge Credit Market.  
5. **Escape** - borrower-only fallback after a time-based lock (censorship safety).

Each path references a **pre-committed PSBT template** defined at vault creation.

## Delinquency Flow
Just before the time based lock is hit, the ESM checks if the credit line is fully paid off:
1. The ESM emits a `DelinquencyTriggered` event. 
2. The coordination middleware publishes the corresponding liquidation instruction.
3. DCN members reconstruct the PSBT based on committed vault parameters.
4. The DCN signs and broadcasts the transaction to Bitcoin.
5. Liquidated BTC is routed to the **DCN** while a dutch auction is started on the EVM layer. 
6. The dutch auction returns stablecoins which replace the principal + debt of the line of credit being liquidated.
7. Remaining BTC is **re-locked** into a new dVault UTXO under the same script conditions with an incremented nonce.

## Key Guarantees
- **Non-Custodial:** BTC remains locked in Taproot vaults on Bitcoin, only user + DCN or timelock can move funds.  
- **Deterministic:** All state transitions and PSBTs are reproducible and verifiable across signers.  
- **Censorship-Safe:** Borrowers can always reclaim funds through the Escape path after timelock expiry.  
- **Market Segregated Risk:** Delinquency proceeds flow into the each market based on where the delinquent credit line came from, reconciling BTC collateral and stablecoin liabilities within the Execution State Machineâ€™s deterministic ledger.

## Distributed Custody Network
Source: /tech/distributed-custody-network

# ğŸ‘¥ Distributed Custody Network

Surge implements **Lindell 2022 Multiparty Schnorr Signing (Lin22)** a threshold Schnorr signature protocol and with ideal zero-knowledge and commitment functionality this framework provides strong security, fault tolerance, and privacy. 

It enables quorum-based gated spending of Taproot vaults (dVaults) without revealing the signer structure or compromising on-chain efficiency.

## Why Threshold Schnorr Signatures Essential for dVaults

- **Threshold Signing** - Every signing session is gated by pre-sign policy checks by individual signers making it reliable and accountable; only a t-of-n quorum can authorize within rules.
- **Byzantine Resilient** - The protocol continues safely even if some signers are offline or act maliciously. Misbehavior is provable and recoverable.
- **Taproot Compatibility** - Bitcoin's Taproot ([BIP340](https://en.bitcoin.it/wiki/BIP_0340)) requires Schnorr signatures. Threshold signatures must be indistinguishable from single-party Schnorr signatures to preserve privacy and efficiency.

## Why Surge Chooses Lin22

Surge prioritizes **reliability, accountability, and verifiability** over lowest latency.

- **Trustless Coordinator** - Lin22 doesn't rely on a trusted coordinator. Its security holds even with partial failures or adversarial behavior.
- **Identifiable Misbehavior** - Each signer provides Fischlin Zero-Knowledge Proofs (ZKPs). If a signer cheats or aborts, the network obtains cryptographic evidence, enabling automated slashing and signer rotation.  
- **Privacy Preserving** - The final aggregated signature is a standard Taproot compatible Schnorr signature. Vault spends are indistinguishable from single signer spends.

Unlike FROST, where a single malicious signer can halt the session, Lin22 identifies and proves who misbehaved. Even if a round fails, it records cryptographic proof, keeping vault operations auditable and recoverable.

Surge's implementation uses Coinbase's audited [**cb-mpc**](https://github.com/coinbase/cb-mpc) library, embedding Lin22 within the signer coordination service.

## Signing Flow in Surge (Lin22)

#### 1. Distributed Key Generation (DKG)
- Key shares are generated using **Feldman's Verifiable Secret Sharing (VSS)**.
- Public commitments allow verification that shares are consistent.
- Result: A single Taproot public key with private shares held by signers.

#### 2. Signing Rounds
- **Commitment** - Signers choose nonces and share hash commitments. Inclusion in this round is mandatory.
- **Decommitment & Proof** - Nonces and **Fischlin ZKPs** revealed, invalid proofs flag misbehavior.  
- **Signature Shares** - Honest signers compute valid shares, coordinator aggregates into a single BIP340 Schnorr signature, valid for Taproot.

## Lin22 vs. FROST

Two major threshold Schnorr constructions were evaluated:

- **FROST (RFC 9591)** - Optimized for speed (two rounds).
- **Lindell 2022 (Lin22)** - Optimized for robustness, with three rounds and formal UC proofs.

| Property | **FROST** | **Lin22 (2022)** |
|----------|-----------|------------------|
| **Signing Rounds** | 2 | 3 |
| **Security Proof** | **UC secure** (Universally Composable), but aborts if signers fail | UC secure with **full simulatability** (via Fischlin ZKPs) |
| **Abort Handling** | Session halts if any signer malicious, relies on coordinator trust | Identifies cheaters with proof, removes signer for next set of request |
| **DKG Setup** | ~2 rounds (Pedersen VSS) | 5+ rounds (Feldman VSS, stronger consistency) |
| **Best Case** | Fast when all signers are honest | Robust even if some signers are faulty |
| **Output** | BIP340 Schnorr | BIP340 Schnorr |

## Example: 3 of 4 Signing

- **FROST** â†’ If a signer submits invalid data (e.g., a bad signature share), the session aborts. The honest participants cannot complete the signature. Need to trust coordinator to remove malicious signer.
- **Lin22** â†’ If a signer misbehaves, their ZK proof (included in the protocol) reveals them as malicious to the network. The session aborts, but with publicly verifiable evidence of who misbehaved. This will help for slashing and signature share rotation.

**dVault remains operable even under Byzantine conditions,** ensuring both fault-tolerance and cryptographic accountability.

---

Surge adopts Lin22 Threshold Schnorr Signatures because resilience and verifiability matters more than speed when securing Bitcoin collateral at scale.

## References
- [Simple Three-Round Multiparty Schnorr Signing with Full Simulatability](https://eprint.iacr.org/2022/374.pdf)
- [Cure53 Audit Report: Coinbase cb-mpc Library](https://github.com/coinbase/cb-mpc/blob/master/docs/cure53-audit.pdf)

## DLCs
Source: /tech/dlcs

# âš¡ Why DLCs Donâ€™t Work for Surge

Discreet Log Contracts (DLCs) are a clever way to make Bitcoin respond to external data like the BTC/USD price - by letting an oracle decide which outcome becomes valid. That works well for **single-event contracts** (like â€œif BTC > $60k, pay Aliceâ€), but Surge vaults are long-lived financial state machines. They need to handle multiple transactions - repayments, partial liquidations, and timeouts - from same vault address. 

## 1. Outcome Explosion  
In a DLC, every possible oracle result must be **predefined** with its own payout path. For lending, this means mapping *every* potential liquidation price to a unique address.  
Example:
```
Outcome 1 â†’ 110000k
Outcome 2 â†’ 109000k
...
Outcome 10 â†’ 100100k âœ… (Sweep)
```
In a live system with continuous BTC price updates, the number of outcomes grows exponentially. Surge vaults need a **continuous collateral ratio**, not a finite list of precomputed addresses.

## 2. One Keypath per Outcome  
DLCs work by revealing a single keypath - the one matching the oracleâ€™s outcome. Once that path is used, we canâ€™t reuse the same address after the first event.  

## 3. Non-Persistent Lifecycle  
When a DLC settles, the address is â€œburnedâ€ - funds are swept, and the contract ends. A dVault keeps the same Taproot tree until final closure. Each dVault encodes its logic from the start.

## Summary

| Concept | DLC | dVault |
|----------|-----|--------|
| Outcome model | Discrete, precomputed | Continuous, protocol-driven |
| Keypath usage | One per outcome | Multiple reusable paths |
| Lifecycle | Single-use | Persistent |
| Oracle role | Executes payout | Attests to state |
| Address model | Burns on settle | Lives until closure |

## Deterministic Liquidation
Source: /tech/dvaults-liquidation

# ğŸ¯ Deterministic Liquidation for Locked Bitcoin

*dVaults* are Taproot-based Bitcoin vaults that enforce deterministic liquidation and non-custodial collateral management. Each vault encodes three spend paths:
1. **Repay** - borrower + DCN authorization.  
2. **Liquidate** - DCN-only authorization when collateral falls below the minimum ratio.  
3. **Delinquency** - DCN-only authorization when credit line is not paid off or extended at end of term.  
4. **Transfer** - borrower + DCN + third party authorization when borrower requests loan transfer out of Surge Credit Market.  
5. **Escape** - borrower-only fallback after a time-based lock (censorship safety).

Each path references a **pre-committed PSBT template** defined at vault creation.

Liquidations are **triggered by the Execution State Machine (ESM)**, which emits deterministic events (`LiquidationTriggered`) when a vaultâ€™s collateral ratio breaches the protocol threshold.

## Coordination Layer
A deterministic coordination program (middleware) runs on EVM-compatible infrastructure.
- Tracks vault collateral, debt, and oracle state.  
- Emits deterministic liquidation instructions (â€œliquidate 0.02 BTC lotâ€).  
- Cannot move BTC directly, it only attests valid liquidation conditions to the **DCN**.  
- Every state change is verifiable and reproducible across members of the DCN.

This middleware acts as an *execution oracle* that coordinates DCN actions without custodial control or discretionary intervention.

## Distributed Custody Network Verification 
Each DCN member independently validates before co-signing:
- Verify that inputs correspond to the correct dVault UTXO and MAST leaf.  
- Ensure outputs are not controlled by DCN members.  
- Confirm input parameters align with pre-committed liquidation rules.  
- Check that oracle data remains within deviation limits.  
- Verify that the escape timelock has not expired.
If any rule fails, **no signature is produced** preventing arbitrary spending.

## Liquidation Flow
When `CR < MCR (Minimum Collateral Ratio)`:
1. The ESM emits a `LiquidationTriggered(vaultId)` event. 
2. The coordination middleware publishes the corresponding liquidation instruction.
3. DCN members reconstruct the PSBT based on committed vault parameters.
4. The DCN signs and broadcasts the transaction to Bitcoin.
5. Liquidated BTC is routed to the **DCN** while a dutch auction is started on the EVM layer. 
6. The dutch auction returns stablecoins which replace the principal + debt of the line of credit being liquidated.
7. Remaining BTC is **re-locked** into a new dVault UTXO under the same script conditions with an incremented nonce.
This process can also enable **micro-lot liquidation**, minimizing borrower losses and preventing cascading liquidations during volatility.

## Key Guarantees
- **Non-Custodial:** BTC remains locked in Taproot vaults on Bitcoin, only user + DCN or timelock can move funds.  
- **Deterministic:** All state transitions and PSBTs are reproducible and verifiable across signers.  
- **Censorship-Safe:** Borrowers can always reclaim funds through the Escape path after timelock expiry.  
- **Market Segregated Risk:** Liquidation proceeds flow into the each market based on where the liquidated credit line came from, reconciling BTC collateral and stablecoin liabilities within the Execution State Machineâ€™s deterministic ledger.

## Execution State Machine
Source: /tech/execution

# âš™ï¸ Execution State Machine
The **Execution State Machine (ESM)** functions as canonical ledger for **BTC-backed liabilities**.  
It connects Bitcoin vaults, signer sets, and stablecoin issuance through deterministic state transitions, ensuring BTC collateral can only move when programmatic conditions are satisfied.

The ESM defines *authorization logic* for Bitcoin spends, while the actual spend construction and signing occur in the **[Deterministic Liquidation](/tech/dvaults-liquidation)** module.

## Canonical Ledger for BTC-Backed Liabilities
The onchain State maintains the **single source of truth** for:
- Collateral ratios and liquidation thresholds.  
- Active liabilities (stablecoin denominated debt).
- Signer sets composition and epoch rotations.

It **prevents rehypothecation** by ensuring every Bitcoin UTXO is represented exactly once in system state, binding liabilities directly to on-chain BTC collateral.

## Bitcoin Aware State
The ESM is natively coupled to Bitcoin:
- **Oracle Feeds**: Medianized BTC/USD prices from trusted providers update collateral ratios in real time.
- **Bitcoin Attestations**: Inclusion proofs for Taproot UTXOs and spends confirmations are submitted to ESM, ensuring the on-chain records mirrors actual Bitcoin state.

This guarantees that liabilities within application are always corresponds to **native Bitcoin collateral**, never synthetic or wrapped assets.

## State Root Commitments
A confirmed state transition finalizes a **state root** that encodes:
- Vault positions and collateral ratios.  
- Active signer set and epoch key.  
- Marketplace balances (variable pool and fixed markets) and stablecoin liabilities. 

BTC spends from a dVault are only valid if the signer set signs under the **aggregate threshold Schnorr key** bound to this state root. This creates a cryptographic anchor, BTC collateral cannot move unless the Execution Program has verified and authorizes it.

## Oracle Integration
The ESM depends on a Native Oracle Hub to monitor BTC/USD prices and enforce collateralization rules.  
- Medianized prices across trusted feeds are used for CR enforcement.  
- Liquidation events are emitted when CR < MinCR, binding signer permissions to liquidation spends.  
All oracle attestations are verifiable and time-bounded, no single oracle can trigger a liquidation unilaterally.

## Distributed Custody Network Enforcement
Distributed Custody operations are strictly deterministic and event-driven:
- **Distributed Custody Enforcement**: Coinbase [cb-mpc](https://github.com/coinbase/cb-mpc) distributed signing rounds for Taproot vault keys.
- **Contract-Gated Authorization**: Distributed Custody members can only sign if the ESM has emitted a valid event.
- **No Rogue Signing**: Distributed Custody members do not decide when BTC can move - the ledger enforces it.

This guarantees **programmatic enforcement of BTC custody**, TC moves only when the cryptographic and economic conditions encoded in Surgeâ€™s Execution State Machine are met.

:::info
See [Deterministic Liquidation](/tech/dvaults-liquidation) for details on PSBT based execution and signer coordination.
:::

## Unilateral Exit
Source: /tech/exit

# â³ Unilateral Exit

The **Unilateral Exit** (also called the *Timelock Exit Path*) is the final Taproot branch in every dVault. It guarantees that the vault owner can always recover their BTC, even if all DCN members or the Execution State Machine (ESM) become unavailable.

This path enforces **sovereignty at the script level** - not by protocol promises, but by Bitcoinâ€™s native time-lock logic.

Example Unilateral Exit Hypothetical
    - Day 1 - Collateral is deposited and stablecoin is distributed
    - Day 300 - EVM / DCN go offline
    - Day 365 + 7 - Borrower can unilaterally withdraw all collateral without paying back principal + interest

## Why It Exists
All other dVault spend paths require multi party coordination:

If those external systems fail - DCN go offline, oracle data stops updating, or the ESM halts - the user still needs a guaranteed way to recover funds.  
Thatâ€™s what this Taproot spend path enforces: **after a fixed delay, the user can unilaterally spend the vault**.

## Script Logic

The unilateral exit leaf commits a simple, auditable Bitcoin script using `OP_CHECKLOCKTIMEVERIFY (CLTV)`:

```bitcoin
# Timelock Exit Path
# Spendable by user only after predefined timelock expiry
AND(
    OP_CHECKLOCKTIMEVERIFY,
    OP_DROP,
    OP_CHECKSIG(user_exit_key)
)

## FAQs
Source: /tech/faqs

# ğŸ’¬ FAQs

DLCs are single-use oracle contracts designed for event-based payouts. Surge vaults are persistent and programmable, supporting recurring actions like borrow, repay, and partial liquidation.
DLCs canâ€™t maintain live vault states or multi-party control, so Surge uses Taproot + MAST scripts for reusable native logic. 
Read more [here](/tech/dlcs)

---

A single key path exposes all logic under one aggregated key, reducing flexibility and privacy.  
**MAST** allows each spend condition - repayment, liquidation, and escape to exist as a separate branch, revealing only the one used and keeping other logic hidden.

---

Even if signers go offline or refuse to cooperate, users can still unilaterally recover BTC after a timelock using the Escape Hatch path. The non-custodial guarantee comes directly from Bitcoin script.

---

BTC stays in your dVault, which no single entity can spend. Even if signers go offline, the escape hatch lets you unilaterally recover it.
---

**Lin22** provides stronger fault tolerance and accountability.  
If a signer misbehaves, Lin22 generates cryptographic proof identifying who failed, allowing to exclude signer for next requests, slashing and signer rotation without relying on the coordinator

---

**Variable rate** comes from the floating-rate market: the borrow rate moves with utilization. **Fixed rate** comes from dedicated fixed-rate tranches (e.g. 6%, 8%): you lock in a set rate for your loan. Liquidity is *moved* between the variable pool and fixed markets when borrowers take or repay fixed-rate loansâ€”it isn't duplicated. LPs can opt in to fixed markets and set allocation limits. See [Credit Markets](/tech/credit-markets) for the full picture, or the [Surge Multi-Market Lending Pool](https://surgehq.notion.site/Surge-Multi-Market-Lending-Pool-2fc232deac9080218404ea7605e713c6) (Notion) for a design deep-dive.

## ğŸŒ Oracle System
Source: /tech/oracles

# ğŸŒ Oracle System
The **Oracle System** is Surgeâ€™s native BTC/USD price feed mechanism. Unlike external oracle plug-ins, Surge treats price discovery as a **core module of the state machine**, ensuring collateralization logic is deterministic, and consensus-driven.

The Oracle System powers:
- **Collateral Monitoring** - updating each dVaultâ€™s live Collateral Ratio (CR).
- **Liquidation Enforcement** - triggering liquidation conditions when CR < MinCR.
- **System Integrity** - anchoring liabilities to verifiable BTC/USD market prices without relying on off-chain actors.

By embedding price feeds directly into execution state, Surge eliminates discretionary trust and guarantees **programmatic, protocol-native valuation of Bitcoin collateral**.

## Importance
1. **Protocol-Native**  
   - Oracle updates are finalized inside the Execution State itself.  
   - Validators replicate the same aggregation logic, guaranteeing a single source of truth.

2. **Deterministic Medianization**  
   - Multiple signed submissions per block.  
   - Aggregated into a medianized price point, finalized with the block.  
   - Ensures liveness and robustness against outliers or malicious feeds.

## Failure Safety
- **Deterministic Fallbacks**  
  If insufficient updates are available, the system reuses the last confirmed state until new data finalizes.

- **Graceful Degradation**  
  Execution halts collateral ratio updates temporarily, but state remains coherent and auditable.

- **Manipulation Resistance**  
  Medianization from mulitple sources prevents single-source manipulation.
  Validators rejecting invalid submissions ensures Byzantine resilience.

## Oracle Events
The Oracle System emits canonical events:
- `PriceUpdated { medianPrice, timestamp }`
- `CollateralRatioUpdated { vaultId, newCR }`
- `LiquidationTriggered { vaultId, CR }`

These events bind signer permissions and provide a complete audit trail for liquidation logic.

## Technical Overview
Source: /tech/overview

# ğŸ”§ Technical Overview

Surge is a Bitcoin-native credit market built on **programmable Taproot vaults**, called **dVaults**. 

Each dVault locks BTC under predefined scripted conditions that allow repayment, liquidation, delinquency, transfer, and unilateral exit. All logic is enforced by Bitcoin script, no wrapped assets or no custodians.

A dVault is co-manged by the user and the Distributed Custody Network. 
- **The User**, who provides BTC as collateral
- **The Distributed Custody Network**, a decentralized set of threshold signers that validate state transitions. 

Both must provide Schnorr signatures to authorize any movement of BTC, ensuring coordination without compromising user custody.

Surge uses an Execution State Machine (ESM) to coordinate vault logic and monitor collateral health. The ESM functions as a deterministic coordination layer operated by distributed custody nodes. It observes Bitcoin vault data, oracle price feed, and distributed custody proofs, then produces verifiable state commitments when spend conditions are satisfied.

When a vaultâ€™s collateral ratio (CR) drops below its per market safety threshold, the **liquidation path** activates automatically.  BTC is spent to the DCN, which starts and dutch auction process. The procceeds from the auction return to the market from which the credit line was liquidated.  

When a vaultâ€™s term expired and the credit line is not fully repaid, the **delinquency path** activates automatically.  BTC is spent to the DCN, which starts and dutch auction process. The procceeds from the auction return to the market from which the credit line was liquidated. Any remaining BTC is returned to the borrower.  

Other paths **repayment** and **time locked recovery (Unilateral exit)** are enforced directly through Taproot conditions, ensuring execution by code, not trust. 

The protocolâ€™s liquidity layer is **multi-market**: a **variable** pool and **fixed-rate** markets, with liquidity moving between them on borrow and repay.

## Repayment
Source: /tech/payment

# ğŸ’° Repayment Path

The **Repayment Path** is the normal closure path of a dVault. It defines how BTC leaves the vault when the loan is repaid. Thereâ€™s no bridge, contract, or wrapped asset - only a Bitcoin spend that becomes valid once the correct signatures are presented.

## How It Works

1. **Debt Reduction**
   - The borrower repays stablecoins (e.g., USDC) to the protocol treasury via the `Repay()` function.
   - The Execution Layer validates the transfer and updates the `debtUsd` field of the vault ledger.

2. **Collateral Unlock**
   - Once the repayment is confirmed, a release signal is emitted for a proportional BTC amount.
   - Signers verify the repayment event and co-sign a spend via the **Repayment ScriptPath** inside the Taproot tree. They cannot trigger this spend independently - the borrowerâ€™s authorization is always required.

3. **Full Repayment**
   - When total `debtUsd = 0`, the dVault can be fully unlocked.
   - The user + signer quorum co-sign the Bitcoin spend transaction.
   - BTC is returned to the depositorâ€™s withdrawal address.

## Script Anatomy
Each repayment branch commits the following tapscript at vault creation:

```bitcoin-script
# User + signer network both must sign with their signature keys.
# The execution layer attests repayment but cannot move funds.
AND(
    OP_CHECKSIG(user_pubkey),
    OP_CHECKSIG(lin22_signer_set_key)
)
```

Repayment is the simplest â€” yet most important â€” path in Surgeâ€™s lifecycle, proving that Bitcoin can be used as dynamic collateral without leaving its native chain.

## Self Custody User Wallet
Source: /tech/self-custody-wallet

# ğŸ” Self Custody User Wallet

The Surge app today holds the borrowerâ€™s wallet and is designed with **self-custody at its core**.
Every wallet instance ensures that private keys are created, stored, and used exclusively under the authenticated userâ€™s control.  

This architecture grants the user full authority over 
- signing actions
- key export
- stablecoin distribution
- return address for various spend paths

The signing environment executes as a sealed runtime within the underlying infrastructure. 
Once instantiated, its memory and code are cryptographically measured and isolated even operators, administrators, or the host kernel cannot read, export, or modify a userâ€™s private key.

## Authentication & Key Lifecycle

### 1. Email Login & Session Initialization
- The user authenticates using **email + OTP**.  
- Upon successful verification, a short-lived **JWT session token**.  
- This token is used to authorize enclave operations during its validity period.

### 2. Deterministic Key Generation
- On first login, the instance queries the enclave for an existing keypair.  
- If absent, the enclave **generates a new asymmetric keypair** internally.
- The **public key** is returned and mapped as `{ userID, email, publicKey }`.
- The **private key** remains sealed inside isolated memory and never exposed or serialized outside the boundary.

### 3. Transaction Signing Flow
- The client submits a transaction payload with the active JWT.
- The backend validates the session and relays `{ userID, txData, signatureRequestID }` to the enclave.
- The enclave verifies request authenticity and authorization before signing.
- Signing occurs inside the secure environment using the private key, only the signature is returned.

### 4. Controlled Key Export
- A user may export their private key for external custody.
- The system re-prompts for OTP and encrypts the exported key using a user defined passphrase.  
- The encrypted key blob serves as a portable, user-controlled backup.

## Self-Custody Characteristics

| Property | Enforcement |
|-----------|-------------|
| **User Ownership** | All cryptographic operations originate from keys generated under the userâ€™s control. |
| **Key Isolation** | Keys are sealed inside protected compute environments, isolated from application and infrastructure layers. |
| **Portability** | Encrypted key export allows migration and independent storage. |

## Hardware Backed Isolation

Wallet key management operate within hardware-backed **trusted execution environments (TEEs)**.  
Each instance produces a **cryptographic attestation report** at initialization:
- Verifies that the environment runs on **genuine, unmodified hardware**.  
- Ensures the loaded code matches the **approved wallet binary**.  
- Any change in code or environment alters the attestation fingerprint and automatically revokes trust.

This mechanism provides verifiable proof that the wallet enclave is authentic, unmodified, and operating in a known-good state.

## Versioning & Update Lifecycle

Enclave binaries are immutable at runtime. Updates or bug fixes require a versioned redeploy process:
1. Build a new enclave image (with updated wallet logic).
2. Deploy and verify its new measurement hash via attestation.

This wallet architecture unifies user sovereignty, hardware-rooted security, and key portability, providing a deterministic self custodial foundation for Surge's Bitcoin-native credit market.

## Transfers
Source: /tech/transfers

# ğŸ”„ Transfers

The **Transfer** path allows a borrower to move a credit facility (or collateral) to or from a third-party marketplace. This path is encoded as a spend condition that requires **three-way authorization**: the borrower, the Decentralised Custody Network (DCN), and the third-party marketplace (or its designated signer).

The exact on-chain encoding and coordination flows are not yet finalised; what follows is a generic description of the intended process.

## Transfer flow (generic)

1. **Borrower request** â€” The borrower initiates a transfer (e.g. moving the loan out of Surgeâ€™s credit market into another marketplace, or the reverse).
2. **Coordination** â€” The Execution State Machine (or a coordination layer) validates the request and prepares the transfer instruction. The third-party marketplace is notified and confirms willingness to accept (or release) the position.
3. **Multi-party signing** â€” The required parties participate in a signing round:
   - **Borrower** â€” Authorises the move of their collateral or facility.
   - **DCN** â€” Authorises the spend from the dVault (or the release of Surgeâ€™s claim) in line with the transfer terms.
   - **Third-party marketplace** â€” Authorises acceptance (or release) of the position on their side.
4. **Settlement** â€” Once all required signatures are collected, the Bitcoin transaction (if any) is broadcast and the execution-layer state is updated so both systems reflect the new ownership or location of the facility.

Settlement details (e.g. PSBT construction, messaging between Surge and the third party) will be defined as the feature is built out.

## Key points

- **Three-way coordination:** A transfer is only valid when the borrower, the DCN, and the third-party marketplace have all authorised it. No single party can move the facility unilaterally.
- **Design in progress:** Specific flows, APIs, and on-chain script details are still to be defined. This page will be updated as the transfer path is implemented.

## dVaults
Source: /tech/vaults

# ğŸ” dVaults: Programmable Bitcoin Vaults

A **dVault** is a Bitcoin Taproot UTXO ([BIP341](https://en.bitcoin.it/wiki/BIP_0341)) whose spend conditions are committed via **MAST/Tapscript** ([BIP342](https://en.bitcoin.it/wiki/BIP_0342)).  
- **Taproot** commits multiple spend conditions into a single address.
- **MAST (Merkelized Alternative Script Tree)** enumerates independent spending conditions, allowing funds to be spent by satisfying any single script. Each script is a leaf in a Merkle tree, and only the executed leaf is revealed during spend. Any unused branches remain hidden.

Surge uses dVaults as its collateral engine and BTC always remains on Bitcoin, only moving when one of the pre-committed spend conditions is satisfied.

## How dVaults are Programmed?

Each dVault locks BTC under a single encoded public key (PT2R) with multiple predefined **spend paths**:
- **Repayment path** activated when the borrower's repayment is attested by the Execution State Machine (ESM) and Authorized by the borrower and Decentralised Custody Network using **threshold Schnorr signatures** from Coinbase [cb-mpc](https://github.com/coinbase/cb-mpc). This is the normal closure condition that releases BTC once the loan is settled.
- **Liquidation path** activated when collateral ratio falls below the minimum threshold and signed by the DCN. The DCN, following oracle validation, can execute liquidation to settle outstanding debt by transferring discounted BTC to the market.
- **Timelock Exit** a long-term unilateral exit path that activates after a defined **CLTV** delay, guaranteeing non-custodial control even if all signers fail.

All three branches are committed at vault creation. Only the executed path is revealed during a spend.

## Script Structures

### 1. Repayment Path (Ledger Validated Unlock)

```bitcoin-script
# Requires depositor + decentralised signer set key &
# Valid only if repayment is attested by the ESM
OP_CHECKSIG(user_pubkey),
OP_CHECKSIGADD(lin22_signer_set_key)
OP_2
```

### 2. Liquidation

```bitcoin-script
# Signers key can spend BTC if CR < MinCR
OP_CHECKSIG(lin22_signer_set_key),
OP_CHECKSIGADD(oracle_attestation_signature),
```

### 3. Timelock Exit

```bitcoin-script
# Depositor regains unilateral control after CLTV expiry
OP_CHECKLOCKTIMEVERIFY,
OP_DROP,
OP_CHECKSIG(user_exit_key)
```

## Vault Operation Flow
1. **Deposit** - User locks BTC to the Taproot address.
2. **Borrow** - Execution environment issues stablecoins against the attested deposit.
3. **Monitoring** - BTC/USD oracle updates CR, state commits, debts, and liquidity pool (variable and fixed market) balances.
4. **Liquidations** - If `CR < MinCR`, signers spend via the liquidation leaf. The spend MUST produce:
   - **LP pool exchange** - discounted BTC transferred to the pool in exchange for proportional stablecoin debt cancellation.
   - **Relock** - re-locked into the dVault under the borrowerâ€™s control.
5. **Repayment/Full Closure** - Once repaid, signers co-sign the key-path spend, moving BTC as per user instructions.

Each spend path is covered in detail in its own section:
- [Repayment](/tech/payment)
- [Liquidation](/tech/dvaults-liquidation)
- [Unilateral Exit](/tech/exit)

## Security Anchors

All dVault derive from Bitcoinâ€™s native enforcement logic. Every spend path is cryptographically pre-committed in Taproot, validated by threshold Schnorr signatures, and ultimately sovereign through the **Timelock Exit**. The Execution State Machine and signer set coordinate off-chain attestations, but **Bitcoin remains the only enforcement layer**.
