---
title: Deterministic Liquidation
description: Taproot-based Bitcoin vaults that enforce deterministic liquidation and non-custodial collateral management
---

# üéØ Deterministic Liquidation for Locked Bitcoin

*dVaults* are Taproot-based Bitcoin vaults that enforce deterministic liquidation and non-custodial collateral management. Which encodes three spend paths:
1. **Repay** - borrower + signer authorization.  
2. **Liquidate** - signer-only authorization when collateral falls below the minimum ratio.  
3. **Escape** - borrower-only fallback after a time-based lock (censorship safety).

Each path references a **pre-committed PSBT template** defined at vault creation.

Liquidations are **triggered by the Execution State Machine (ESM)**, which emits deterministic events (`LiquidationTriggered`) when a vault‚Äôs collateral ratio breaches the protocol threshold.

## Coordination Layer
A deterministic coordination program (middleware) runs on EVM-compatible infrastructure.
- Tracks vault collateral, debt, and oracle state.  
- Emits deterministic liquidation instructions (‚Äúliquidate 0.02 BTC lot‚Äù).  
- Cannot move BTC directly, it only attests valid liquidation conditions to the **Lin22 signer quorum**.  
- Every state change is verifiable and reproducible across signers.

This middleware acts as an *execution oracle* that coordinates signer actions without custodial control or discretionary intervention.

## Signer Verification 
Each signer independently validates before co-signing:
- The PSBT matches a committed deterministic template.  
- Inputs correspond to the correct dVault UTXO and MAST leaf.  
- Outputs are not controlled by signers.  
- Input parameters align with pre-committed liquidation rules.  
- Oracle data used is within deviation limits.  
- Escape timelock has not expired.
If any rule fails, **no signature is produced** preventing arbitrary spending.

## Liquidation Flow
When `CR < MCR (Minimum Collateral Ratio)`:
1. The ESM emits a `LiquidationTriggered(vaultId)` event. 
2. The coordination middleware publishes the corresponding liquidation instruction.
3. Signers reconstruct the PSBT based on committed vault parameters.
4. The signer quorum co-sign and broadcasts the transaction to Bitcoin.
5. Liquidated BTC is sent to the **Stability Pool**.
6. Remaining BTC is **re-locked** into a new dVault UTXO under the same script conditions with an incremented nonce.
This process enables **micro-lot liquidation**, minimizing borrower losses and preventing cascading liquidations during volatility.

## Key Guarantees
- **Non-Custodial:** BTC remains locked in Taproot vaults on Bitcoin, only user + signer quorum or timelock can move funds.  
- **Deterministic:** All state transitions and PSBTs are reproducible and verifiable across signers.  
- **Censorship-Safe:** Borrowers can always reclaim funds through the Escape path after timelock expiry.  
- **Stablecoin ready:** Liquidation proceeds automatically flow into the Stability Pool, powering BTC-backed stablecoin liquidity.
