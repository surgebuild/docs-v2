---
title: ðŸ’§ Liquidity Management
description: Deterministic routing, solvency flow, and LP incentive model for credit system.
---
import ZoomImage from "../../components/ZoomImage";

# ðŸ’§ Liquidity Management

Surgeâ€™s liquidity layer connects **cross-chain stablecoin routing** with **on-chain collateral management**.  
While stablecoins move freely across networks, all liquidation and recovery activity resolves through the **Unified Liquidity Pool** the protocolâ€™s equilibrium mechanism for BTC-backed solvency.

## 1. Stablecoin Routing
Stablecoin routing ensures a unified, auditable supply across multiple networks (Ethereum, Base, Arbitrum, Optimism, etc.) while keeping Surgeâ€™s BTC collateral anchored on Bitcoin.

### Core Principles
- **Canonical Supply** Stablecoins remain native - no synthetic or wrapped representations. Supply consistency is verified directly from issuer attestations.
- **Adapter-Based Routing** Modular integration with adapters (e.g., **CCTPv2**) allows deterministic burn-and-mint settlement between chains under issuer authorization.
- **Deterministic Settlement** Transfers finalize through signed attestations verifiable on-chain, ensuring mint parity and preventing double liquidity issuance.
- **Settlement Finality** All mints require issuer-signed proof; once confirmed, tokens on the destination chain are treated as canonical supply.

This design keeps liquidity **fungible, auditable, and settlement-grade**, aligning with institutional requirements for verifiable cross-chain balance sheets.


## 2. Unified Liquidity Pool

The **Unified Liquidity Pool** serves both credit and liquidation purposes.
For liquidation it absorbs undercollateralized debt using stablecoin liquidity and receives discounted BTC tranches in return.

| Component | Function |
|------------|-----------|
| **Unified Liquidity Pool** | Primary source of funds for credit and liquidation |
| **Liquidation Trigger** | Initiated when Collateral Ratio (CR) < MinCR, validated by oracles |
| **Reserved Liquidity** | Deterministic buffer allocated for liquidation events |
| **BTC Distribution** | Discounted BTC transferred to pool depositors proportional to stake |

The Execution State Machine dynamically partitions liquidity between Credit Liquidity and Reserved Liquidity based on real-time collateral conditions.  

## 3. Liquidation Logic

Liquidations are **partial, iterative adjustments** of vault collateral designed to maintain solvency smoothly rather than abruptly.  
Each iteration cancels a fraction of the vaultâ€™s debt and transfers a corresponding BTC slice to the Unified Liquidity Pool.

### Parameters

| Symbol | Description | Example |
|--------|--------------|----------|
| \( B \) | Collateral BTC | 0.28483537 |
| \( P \) | Current BTC price after drop | $69,000 |
| \( D \) | Outstanding debt (USDC) | $11,200 |
| \( MinCR \) | Liquidation threshold | 1.50 |
| \( RecCR \) | Recovery target after liquidation | 1.70 |
| \( s \) | Unified liquidity pool discount | 0.05 |

### Step 1 - Check if liquidation is required

Calculate the current collateral ratio (CR) by dividing the collateral value (B Ã— P) by the outstanding debt (D).

If CR â‰¥ MinCR, do nothing.  
Otherwise, proceed to compute the liquidation delta.


### Step 2 - Compute debt to cancel

Calculate the amount of debt (Î”D) to be canceled using the formula: Î”D = (RecCR Ã— D - B Ã— P) / (RecCR - 1/(1-s))

Clamp Î”D between [0, D].  
This defines the amount of stablecoin the Unified Liquidity Pool must provide to restore CR â‰ˆ RecCR.


### Step 3 - Compute BTC sent to pool

Calculate the BTC amount sent to the pool: BTC_pool = Î”D / (P Ã— (1-s))

Clamp BTC_pool â‰¤ B.


### Step 4 - Post-liquidation state

After liquidation:
- D_post = D - Î”D
- B_post = B - BTC_pool  
- CR_post = (B_post Ã— P) / D_post â‰ˆ RecCR

Vault solvency is restored, and liquidation proceeds are distributed to the Unified Liquidity Pool.

## 4. Numerical Example (10% Discount)

| Metric | Before | After |
|--------|--------|--------|
| BTC Price | 70,000 | 63,000 |
| Collateral BTC | 0.2848 | 0.2355 |
| Collateral Value | 20,000 | 14,832 |
| CR | 1.98 | 1.51 |
| \( \Delta D \) | â€“ | 8,151 |
| BTC to Pool | â€“ | 0.0499 |
| Post CR | â€“ | 1.517 |
| Post LTV | â€“ | 0.659 |

The system cancels ~$8.1k of debt, transfers 0.0499 BTC (based on the pool discount parameter) to the Unified Liquidity Pool, and moves the vault toward its recovery CR target.

## 5. Post-Liquidation Flow

1. **Trigger Event** - Oracle attests.
2. **ESM Authorization** - Executes liquidation transaction, computing.
3. **Unified Liquidity Pool Settlement** - Stablecoin debt is canceled, and discounted BTC is transferred into the Unified Liquidity Pool ledger.
4. **Re-Vaulting** - Remaining BTC automatically re-locked into a fresh dVault (same template, incremented nonce).
5. **Ledger Update** - ESM emits `LiquidationExecuted` and updates vault state.

## 6. LP Incentive Model
Liquidity Providers (LPs) earn yield through multiple mechanisms,

<ZoomImage
  src="/assets/incentive_model.png"
  alt="LPs Incentive Model"
  width="100%"
  className="mx-auto"
/>

### 6.1 Borrow Interest / Base Yield
- Borrowers pay interest on outstanding debt.  
- Interest flows into the Unified Liquidity Pool.  
- LPs receive sLP share tokens that represent proportional ownership in the pool.  
- sLP value increases as pool assets grow.

### 6.2 Liquidation Discount / Performance Yield
- The pool cancels a borrowerâ€™s debt using \( \Delta D \) USDC.
- The pool receives \( BTC_pool \) at a fixed discount of 10%.
- BTC is deposited into the LP Pool Vault (a Taproot vault controlled by the signer network).
- sLP share accounting distributes discounted BTC gains to LPs.

Since BTC is acquired below market price, the pool realizes an immediate mark-to-market gain.  
This gain is reflected in sLP token value.

LPs may redeem their share in either:
- BTC (withdrawn from the LP Pool Vault), or  
- USDC (selling BTC exposure back to the pool internally).

## 6. Design Outcome
- **Continuous Solvency** - No full liquidations; risk is amortized.  
- **Predictable Market Behavior** - Eliminates liquidation cascades.  
- **LP incentives aligned with system stability** - interest yield + discounted collateral acquisition.
- **Transparent Accounting** - Every liquidation step logged and replayable via on-chain events.  
- **Institutional Stability** - Ensures system-wide CR remains deterministic and auditable.

All pool balances and liquidation settlements are anchored in the Execution State Machineâ€™s canonical state root, providing verifiable solvency proofs.

### Cross-Link

- [dVaults](/tech/vaults) - Script-level spend paths  
- [Repayment](/tech/payment) - Normal closure logic  
- [Oracle System](/tech/oracles) - Medianized BTC/USD feed
