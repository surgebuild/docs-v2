---
title: Execution Layer
description: EVM compatible execution with reth + CometBFT, state-root–bound BTC spends
---

# ⚙️ Execution Layer

Surge’s execution layer is the **deterministic ledger** that aligns Bitcoin collateral (on-chain UTXOs) with stablecoin flows (on payout chains). It enforces collateralization rules, drives liquidation triggers, and ensures every BTC spend is cryptographically bound to the current ledger state

## Architecture

- **reth (EVM execution)** — deterministic state transitions; precompile/feature set kept stable across deployments.
- **CometBFT (consensus)** — proposer-based BFT finality (derived from Tendermint), **ABCI++ interface** cleanly separates execution (reth) from consensus (CometBFT).
- **Safety** Blocks only finalize with ≥2/3 weighted validator signatures and as long as ≥1/3 validators are honest, the chain makes progress.
- **Chain-agnostic** — the same execution logic can be instantiated on multiple host chains, a single canonical deployment governs the Stability Pool.

## Ledger Modules

- **VaultRegistry** — tracks `vaultId → {collateral, debt, CR, epoch}`; enforces MinCR & system params.
- **StabilityPool** — absorbs bad debt, executes discounted BTC purchases, maintains lender balances and accounting.
- **SignerRegistry** — records signer epochs, aggregated keys, rotations, and enrollment metadata.
- **OracleModule** — accepts BTC/USD price updates with freshness/medianization; exposes price to CR checks.
- **AttestationModule** — records spend/repay attestations linking Bitcoin actions to the current `state_root`.

## Events

Contracts emit canonical events for every state transition,

- `AttestedDeposit`
- `DebtIssued`
- `DebtRepaid`
- `LiquidationTriggered`
- `VaultClosed`

## State Root Binding

- Every finalized block publishes a `state_root`.
- MPC signers only co-sign BTC spends if bound to `tx_digest || state_root`
- Prevents divergence between Bitcoin spends and Surge’s ledger.

## Validators

- Propose and finalize blocks
- Compute and publish state root
- Verify CR thresholds and liquidation triggers
