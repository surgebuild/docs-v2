---
title: Oracle System
description: Protocol-native BTC/USD oracle integrated directly into the Execution Layer consensus.
---

# ðŸ”® Oracle System
The **Oracle System** is Surgeâ€™s native BTC/USD price feed mechanism. Unlike external oracle plug-ins, Surge treats price discovery as a **core module of the state machine**, ensuring collateralization logic is deterministic, auditable, and consensus-driven.

## Role in Surge
The Oracle System powers:
- **Collateral Monitoring** â€” updating each dVaultâ€™s live Collateral Ratio (CR).
- **Liquidation Enforcement** â€” triggering liquidation conditions when CR < MinCR.
- **System Integrity** â€” anchoring liabilities to verifiable BTC/USD market prices without relying on off-chain actors.

By embedding price feeds directly into consensus, Surge eliminates discretionary trust and guarantees **programmatic, protocol-native valuation of Bitcoin collateral**.

## Importance
1. **Protocol-Native**  
   - Oracle updates are finalized inside the Execution Layer itself.  
   - Validators replicate the same aggregation logic, guaranteeing a single source of truth.

2. **Deterministic Medianization**  
   - Multiple signed submissions per block.  
   - Aggregated into a medianized price point, finalized with the block.  
   - Ensures liveness and robustness against outliers or malicious feeds.

3. **Consensus Enforcement**  
   - Prices only become valid once included in a finalized block.  
   - Prevents validator divergence and eliminates latency arbitrage.

## Data Flow
1. **Sources Submit**  
   - Trusted providers sign BTC/USD price reports.  
   - Reports are gossiped across validators.

2. **Aggregation & Medianization**  
   - Each validator executes identical logic to medianize inputs.  
   - Outlier detection filters anomalous values.

3. **State Update**  
   - `VaultState` objects update CR values.  
   - If CR < MinCR, a `LiquidationTriggered` event is emitted.

4. **Signer Enforcement**  
   - Liquidation events gate signer permissions.  
   - MPC signers may only authorize liquidation spends when Execution Layer consensus confirms the trigger.

## Failure Safety
- **Deterministic Fallbacks**  
  If insufficient updates are available, the system reuses the last confirmed state until new data finalizes.

- **Graceful Degradation**  
  Execution halts collateral ratio updates temporarily, but state remains coherent and auditable.

- **Manipulation Resistance**  
  Medianization + consensus replication prevent single-source manipulation.  
  Validators rejecting invalid submissions ensures Byzantine resilience.


## Why Native Oracles?
External oracles (Chainlink, Pyth, etc.) are off-chain dependencies. Surgeâ€™s model makes the oracle:  
- **First-class consensus logic** â€” part of the state root.  
- **Trust-minimized** â€” no external committees or bridge risk.  
- **Bitcoin-native** â€” valuations enforced against real BTC UTXOs, not synthetic abstractions.

## Oracle Events
The Oracle System emits canonical events:
- `PriceUpdated { medianPrice, timestamp }`
- `CollateralRatioUpdated { vaultId, newCR }`
- `LiquidationTriggered { vaultId, CR }`

These events bind signer permissions and provide a complete audit trail for liquidation logic.
